<?xml version="1.0"?>
<ruleset name="aegis">
    <!-- Set the minimum supported WordPress version -->
    <config name="minimum_supported_wp_version" value="6.6"/>
    <config name="installed_paths" value="vendor/wp-coding-standards/wpcs"/>

    <!-- Include WordPress Extra rules for additional checks -->
    <rule ref="WordPress-Extra"/>

    <!-- Reference WordPress rules with exclusions -->
    <rule ref="WordPress">
        <!-- Prevent WP short array syntax checks -->
        <exclude name="Generic.Arrays.DisallowShortArraySyntax"/>
        <!-- Exclude file comment checks as they are not required for this project -->
        <exclude name="Squiz.Commenting.FileComment.Missing"/>
        <exclude name="Squiz.Commenting.FileComment.SpacingAfterComment"/>
        <exclude name="Squiz.Commenting.FileComment.MissingPackageTag"/>
        <!-- Prevent WP Yoda checks due to updated coding standards -->
        <exclude name="WordPress.PHP.YodaConditions.NotYoda"/>
        <!-- Prevent WP snake_case checks due to extensive usage of DOMDocument -->
        <exclude name="WordPress.NamingConventions.ValidVariableName.UsedPropertyNotSnakeCase"/>
        <exclude name="WordPress.NamingConventions.ValidVariableName.VariableNotSnakeCase"/>
        <exclude name="WordPress.NamingConventions.ValidVariableName.InterpolatedVariableNotSnakeCase"/>
        <!-- Allow file_get_contents as it is considered safe in this context -->
        <exclude name="WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents"/>
    </rule>

    <!-- Disallow long array syntax to enforce short array syntax -->
    <rule ref="Generic.Arrays.DisallowLongArraySyntax"/>

    <!-- Disallow Yoda conditions to align with WordPress standards -->
    <rule ref="Generic.ControlStructures.DisallowYodaConditions"/>

    <!-- Specify PHP file extensions to be checked -->
    <arg name="extensions" value="php"/>
    <file>./functions.php</file>
    <file>./includes/</file>

    <!-- Exclude specific directories from being checked -->
    <exclude-pattern>./docker/</exclude-pattern>
    <exclude-pattern>./node_modules/</exclude-pattern>
    <exclude-pattern>./vendor/</exclude-pattern>

    <!-- Report configuration -->
    <report type="full" output="build/logs/phpcs-report.txt"/>
</ruleset>